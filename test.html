<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Article Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
margin:0;
font-family:system-ui;
background:#f5f7fb;
}

/* SECTION */
.smartHub{
max-width:1200px;
margin:60px auto;
padding:0 15px;
}

.hub-title{
text-align:center;
font-size:32px;
margin-bottom:30px;
}

/* GRID */
.hub-grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
gap:22px;
}

/* CARD */
.card{
background:#fff;
border-radius:18px;
padding:22px;
box-shadow:0 8px 24px rgba(0,0,0,.08);
transition:.35s;
position:relative;
}

.card:hover{
transform:translateY(-8px);
box-shadow:0 18px 40px rgba(0,0,0,.18);
}

.card h3{
margin:0 0 12px;
font-size:20px;
color:#111;
}

.card p{
font-size:14px;
color:#555;
margin:0;
}

.read{
margin-top:18px;
display:inline-block;
background:linear-gradient(45deg,#0a66ff,#0044cc);
color:#fff;
padding:9px 18px;
border-radius:10px;
font-size:13px;
text-decoration:none;
}

.views{
font-size:12px;
color:#777;
margin-top:12px;
}

/* BADGES */
.badge{
position:absolute;
top:14px;
right:14px;
font-size:11px;
padding:5px 11px;
border-radius:20px;
color:#fff;
font-weight:600;
}

.trending{background:#ff3b3b}
.new{background:#00b894}
.pick{background:#6c5ce7}
.ai{background:#ff9f43}

/* MOBILE */
@media(max-width:600px){
.hub-title{font-size:24px}
}
</style>
</head>

<body>

<section class="smartHub">
<h2 class="hub-title">üìä Explore Articles</h2>
<div id="hubGrid" class="hub-grid"></div>
</section>

<script>

// ===== YOUR JSON FILE =====
const DATA_URL="https://shyamkumarkc20.com.np/article/articles.json";

// fallback demo if JSON missing


fetch(DATA_URL)
.then(r=>r.json())
.then(data=>initWidget(data))
.catch(()=>initWidget(fallback));


// ===== MAIN ENGINE =====
function initWidget(articles){

// attach view count
articles.forEach(a=>{
a.views=Number(localStorage.getItem("views_"+a.url))||0;
});

// trending
let trending=[...articles].sort((a,b)=>b.views-a.views).slice(0,2);

// newest
let newest=[...articles]
.sort((a,b)=>new Date(b.date)-new Date(a.date))
.slice(0,2);

// AI random
let ai=[...articles].sort(()=>0.5-Math.random()).slice(0,2);

// merge + unique
let display=[...newest,...trending,...ai];
display=[...new Map(display.map(i=>[i.url,i])).values()].slice(0,6);

render(display);
}


// ===== RENDER CARDS =====
function render(list){

let html="";

list.forEach(a=>{

let badge="";
let days=(Date.now()-new Date(a.date))/86400000;

if(a.editor)
badge=`<div class="badge pick">Editor Pick</div>`;
else if(days<7)
badge=`<div class="badge new">New</div>`;
else if(a.views>5)
badge=`<div class="badge trending">Trending</div>`;
else
badge=`<div class="badge ai">Recommended</div>`;

html+=`
<div class="card">
${badge}
<h3>${a.title}</h3>
<p>${a.desc}</p>
<a href="${a.url}" class="read" onclick="countView('${a.url}')">Read ‚Üí</a>
<div class="views">üëÅ ${a.views} views</div>
</div>
`;
});

document.getElementById("hubGrid").innerHTML=html;
}


// ===== VIEW COUNTER =====
function countView(url){
let v=Number(localStorage.getItem("views_"+url))||0;
localStorage.setItem("views_"+url,v+1);
}

</script>

</body>
</html>
